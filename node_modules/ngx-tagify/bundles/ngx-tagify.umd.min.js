!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@yaireo/tagify"),require("@angular/core"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-tagify",["exports","@yaireo/tagify","@angular/core","@angular/forms","rxjs","rxjs/operators","@angular/common"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ngx-tagify"]={},t.Tagify,t.ng.core,t.ng.forms,t.rxjs,t.rxjs.operators,t.ng.common)}(this,(function(t,e,i,n,a,s,r){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=o(e),l=function(){function t(){this.tagifyMap=new Map}return t.prototype.add=function(t,e){this.tagifyMap.get(t)?console.warn("There already exists a tagify instance with name "+t+"!"):this.tagifyMap.set(t,e)},t.prototype.get=function(t){return this.tagifyMap.get(t)},t.prototype.remove=function(t){this.tagifyMap.delete(t)},t}();l.ɵprov=i.ɵɵdefineInjectable({factory:function(){return new l},token:l,providedIn:"root"}),l.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[]};Object.create;function f(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,a,s=i.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)r.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return r}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}Object.create;var c=function(){function t(t,e){this.tagifyService=t,this.element=e,this.valueType="undefined",this.onChange=Function.prototype,this.onTouched=Function.prototype,this.unsubscribe$=new a.Subject,this.value$=new a.BehaviorSubject(null),this.skip=!1,this.inputClassValue="",this.readonlyValue=!1,this.settings={},this.name="",this.add=new i.EventEmitter,this.remove=new i.EventEmitter,this.tInput=new i.EventEmitter}return Object.defineProperty(t.prototype,"inputClass",{set:function(t){this.setTagsClass(t),this.inputClassValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readonly",{set:function(t){this.readonlyValue=!!t,this.setReadonly()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.valueData},set:function(t){t!==this.valueData&&(this.valueData=t,this.onChange(t))},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){var t=this;this.settings.callbacks=this.settings.callbacks||{},this.settings.callbacks.hasOwnProperty("add")||(this.settings.callbacks.add=function(){return t.add.emit({tags:t.tagify.value,added:t.tagify.value[t.tagify.value.length-1]})}),this.settings.callbacks.hasOwnProperty("remove")||(this.settings.callbacks.remove=function(){return t.remove.emit(t.tagify.value)});var e=this.element.nativeElement.textContent;this.tagify=new u.default(this.inputRef.nativeElement,this.settings),this.name.length&&this.tagifyService.add(this.name,this.tagify),this.setReadonly(),e.length&&(this.tagify.loadOriginalValues(e),this.skip=!0,setTimeout((function(){t.setValue()}))),this.value$.pipe(s.takeUntil(this.unsubscribe$)).subscribe((function(e){if(e)if(t.skip)t.skip=!1;else{if("undefined"===t.valueType&&(t.valueType=typeof e),"string"==typeof e)return t.tagify.loadOriginalValues(e),void setTimeout((function(){t.setValue()}));t.tagify.addTags(e,!1,!0),t.tagify.value.forEach((function(i){if(!e.find((function(t){return t.value===i.value}))){var n=t.tagify.getTagElms().find((function(t){return t.attributes.getNamedItem("value").textContent===i.value}));t.tagify.removeTags(n)}}))}})),this.tagify.on("input",(function(e){t.tInput.emit(e.detail.value),"string"===t.valueType&&"mix"===t.tagify.settings.mode&&(t.value=t.tagify.getMixedTagsAsString())})),a.merge(a.fromEvent(this.tagify,"add"),a.fromEvent(this.tagify,"remove")).pipe(s.throttleTime(0,a.asyncScheduler,{leading:!1,trailing:!0}),s.takeUntil(this.unsubscribe$)).subscribe((function(){t.setValue()})),this.whitelist&&this.whitelist.pipe(s.takeUntil(this.unsubscribe$)).subscribe((function(e){t.tagify.settings.whitelist=e}))},t.prototype.writeValue=function(t){this.value$.next(t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setValue=function(){"string"===this.valueType?this.value=this.tagify.DOM.originalInput.value:this.value=this.tagify.value.slice()},t.prototype.setTagsClass=function(t){var e,i,n=this.element.nativeElement.querySelector("tags");n&&((e=n.classList).remove.apply(e,p(this.inputClassValue.split(/\s+/))),(i=n.classList).add.apply(i,p(t.split(/\s+/))))},t.prototype.setReadonly=function(){this.tagify&&this.tagify.setReadonly(this.readonlyValue)},t.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.tagify.destroy(),this.name.length&&this.tagifyService.remove(this.name)},t}();c.decorators=[{type:i.Component,args:[{selector:"tagify",template:'<input [ngClass]="inputClassValue" #inputRef/>\n    <span style="display: none"><ng-content></ng-content></span>',providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:i.forwardRef((function(){return c})),multi:!0}]}]}],c.ctorParameters=function(){return[{type:l},{type:i.ElementRef}]},c.propDecorators={inputRef:[{type:i.ViewChild,args:["inputRef",{static:!0}]}],settings:[{type:i.Input}],name:[{type:i.Input}],whitelist:[{type:i.Input}],inputClass:[{type:i.Input}],readonly:[{type:i.Input}],add:[{type:i.Output}],remove:[{type:i.Output}],tInput:[{type:i.Output}]};var y=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[l]}},t}();y.decorators=[{type:i.NgModule,args:[{declarations:[c],imports:[r.CommonModule],exports:[c],providers:[l]}]}],Object.defineProperty(t,"Tagify",{enumerable:!0,get:function(){return u.default}}),t.TagifyComponent=c,t.TagifyModule=y,t.TagifyService=l,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-tagify.umd.min.js.map